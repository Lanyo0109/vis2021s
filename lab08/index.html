<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="utf-8">
    <title>Lab 8</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@900&display=swap');

        h1, div {
          background-color: rgba(255, 255, 0, 0.1);
          font-family: 'Noto Serif JP', serif;
          font-size: 24pt;
          border: solid 1px black;
          width: 90%;
          margin: 5px auto;
          padding: 10px;
        }

        div {
          font-size: 12pt;
        }

        body {
            background-color: rgba(255, 128, 255, 0.1);
        }

        video:hover {
            box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);
        }

        .path {
          stroke-dasharray: 1000;
          stroke-dashoffset: 1000;
          animation: dash 5s linear forwards;
        }
        @keyframes dash {
          to {
            stroke-dashoffset: 0;
          }
        }
    </style>
    <script src="https://d3js.org/d3.v6.min.js" charset="utf-8"></script> <!-- v6.5.0 -->
</head>
<body>
    <h1>
        lab08 漢字書寫 (鉛筆字) (毛筆字也OK!) Path Animation
    </h1>
    <div>
      限定使用 D3.js，參考以下影片。
    	<ul>
    		<li><a href="https://bl.ocks.org/basilesimon/f164aec5758d16d51d248e41af5428e4">Animate path in D3</a></li>
    		<li><a href="https://codepen.io/MyXoToD/post/howto-self-drawing-svg-animation">"Self-Drawing" SVG</a></li>
    		<li><a href="https://stackoverflow.com/questions/15275362/how-to-transition-a-path-in-d3-js">How to transition a path in d3.js</a></li>
        <li><a href="https://css-tricks.com/svg-line-animation-works/">How SVG Line Animation Works</a></li>
        <li><a href="http://blog.roachking.net/blog/2014/10/31/osolve-team-drawing-animation/">使用 SVG 將圖片做成動畫</a></li>
        <li><a href="https://www.hesyifei.com/">何一非</a></li>
    	</ul>
    </div>

    <div>
  		<video width="400" controls loop autoplay>
  		  <source src="3.mp4" type="video/mp4">
  		</video>
    </div>

    <div>
      展示區 (姓名)
      <hr>
      <img width="256" src="./SU.svg">
      <img width="256" src="./LAIN.svg">
      <img width="256" src="./YU.svg">
    </div>

    <div>
      Drag and Drop 展示區 (接收任何SVG)<hr>
      <svg id="svg1" height="450" width="350">
      </svg>
      <svg id="svg2" height="450" width="350">
      </svg>
      <svg id="svg3" height="450" width="350">
      </svg>
    </div>

    <script type="text/javascript">
    var line = d3.line();
    var first = ["m 134.6,104.79971 q 15,10 11,11 -3,5 -3,16 3,-1 12,-3 16,-4 19,-5 4,-5 8,-4 14,3 20,7 1,2 -1,3 -1,1 -3,0 -11,-5 -55,7 v 16 q 19,32 38,53 5,6 14,7 22,3 35,9 2,0 0,0 h -7 q -17,-1 -28,-1 -9,0 -16,-11 -21,-23 -36,-48 -2,40 1,66 1,9 5,18 0,4 -6,4 -3,-2 -5,-7 -1,-6 -7,-14 -4,-5 -9,-13 -2,-5 2,-1 l 7,7 q 4,5 6,7 1,1 2,1 1,-1 1,-3 0,-8 -1,-19 -1,-19 0,-46 -21,42 -48,58 -5,2 -1,-2 28,-20 47,-64 -2,-2 -4,-8 -2,-3 -3,-4 -2,0 -10,4 -10,5 -21,2 -2,-1 1,-2 11,-2 30,-9 5,-2 7,-3 0,-22 -3,-27 -2,-5 1,-2 z m -5,-91.999996 q -3,-3.9999995 2,-1 20,13 15,19 -5,8 -11,19 33,-5 37,-9 l 1,-1 q 1,-5 5,-3 5,1 13,5 5,2 8,3 3,2 2,4 -1,2 -4,1 -19,-4 -65,6 -12,18 -29,25 -5,2 -1,-1 14,-9 21,-23 -9,1 -28,4 -12,2 -15,2 2,4 3,10 2,7 -3,7 -8,0 -13,-14 -14,4 -36,-2 -5,-2 1,-2 16,2 33,-3 -3,-11 -7,-21 0,1 -1,-2 -1,-2 -1,-3 1,-1 3,0 l 3,3 q 13,14 15,21 32,-3 48,-6 8,-14 11,-25 2,-4 -7,-13 z m -78,167.999996 8,-5 q 1,-3 1,-17 -11,3 -15,3 -4,1 -1,-1 9,-3 16,-6 0,-2 -1,-5 0,-10 -2,-12 -7,2 -14,2 -4,-2 0,-2 7,-2 16,-6 10,-4 22,-7 6,-2 11,3 3,3 8,7 l 3,3 q 2,4 -1,5 -6,2 -7,9 -3,18 -10,29 -3,11 -18,3 -2,-1 -2,-2 1,-1 3,-1 9,3 14,-4 9,-20 7,-38 -2,-10 -6,-9 -13,1 -23,6 8,8 6,8 v 8 h 1 q 5,-2 9,-1 4,0 2,4 -2,0 -6,1 h -4 q -2,1 -3,4 l -1,1 v 13 q 6,-4 12,-3 1,0 2,1 0,2 -1,2 -1,0 -4,2 -19,7 -21,7 0,5 -3,4 -3,-1 -6,-4 0,-1 -5,-1 -4,-1 -3,-6 2,-3 1,-6 -3,-5 -4,-14 0,-11 -2,-14 -2,-5 9,-13 6,-5 17,-12 9,-6 14,-10 3,-3 -1,-2 -2,0 -4,1 h -3 q 0,0 -1,-1 -1,-1 1,-2 12,-3.999996 18,-6.999996 4,-4 8,-2 2,0 5,2 3,1 4,2 2,1 2,2.999996 -1,2 -3,2 -9,0 -25,9 -4,3 -13,8 -11,6 -18,11 -7,5 -7,10 1,26 18,40 z m 104,-103.999996 q 3,3 6,3 6,3 8,5 3,1 1,2 -2,2 -6,1 -2,-2 -14,3 -27,11.999996 -43,14.999996 -1,1 0,-1 20,-6.999996 38,-18.999996 8,-4 4,-7 1,-3 6,-2 z m -95,9 q 7,6 1,10 -22,23.999996 -35,30.999996 -3,2 -4,1 0,-1 3,-4 15,-11 28,-26.999996 4,-5 5,-11 0,-3 2,0 z m -38,126.999996 q 3,9 8,9 h 3 v 2 q 0,3 2,6 2,2 1,3 0,1 -3,2 -3,0 -6,-3 l -2,-2 q -5,-8 -5,-17 0,-5 2,0 z m 41,-18 q -1,-3 0,-1 13,8 13,14 2,4 -2,6 -6,-2 -11,-19 z m -19,7 q 6,1 11,14 2,5 -1,5 -6,0 -10,-17 -1,-4 0,-2 z m 40,-13 q 9,7 15,14 1,5 -2,6 -4,-1 -7,-7 -1,-6 -7,-11 -2,-4 1,-2 z",
                 "m 10.615385,57.846154 c 36.307692,7.384615 36.615384,7.076923 36.615384,7.076923 l 127.692311,-18.769231 4.61538,-2.769231 30.15385,5.23077",
                 "M 53.692308,24.307692 C 83.538462,82.153846 83.538462,82.153846 83.538462,82.153846",
                 "M 123.84615,7.6923077 C 142,22.769231 142.61538,23.692308 142.61538,23.692308 L 120.46154,67.384615 97.07692,84.923077",
                 "M 67.230769,80.615385 C 44.153846,111.07692 44.153846,111.07692 44.153846,111.07692 l -27.076923,21.53846",
                 "m 55.846154,106.15385 23.538461,-5.84616 5.846154,-4.615382 9.692311,3.846154 -21.538465,8.769228 -30.461538,19.38462 -9.076923,7.38461 -1.692308,3.69231 2.461539,20.30769 4.990875,11.82535 -2.393284,8.15892 6.962282,0.97908 5.548069,5.22171 0.652714,-2.77404 31.330269,-11.85763",
                 "m 37.648118,141.42136 44.819692,-13.81578 4.242641,-2.06693 13.489419,12.72792 -6.96228,8.92043 -6.962282,28.28427 -6.418354,9.68192 -17.188134,-4.13385",
                 "m 40.36776,162.74335 32.091769,-9.8995 h 10.225852",
                 "m 57.338323,133.91515 5.656854,9.57313 -0.652714,35.13777",
                 "m 19.372128,206.47518 5.548068,17.18813 12.836708,11.85764",
                 "M 42.108331,197.33718 56.90318,222.46667",
                 "m 59.731607,188.30798 17.623277,26.43491",
                 "m 80.836025,187.76405 9.790705,7.50621 8.15893,16.10027",
                 "m 98.78566,109.00323 45.90755,-17.405705 9.57313,-9.573138 28.71942,7.832567",
                 "m 87.254379,150.55935 27.413981,-5.65685 53.74012,-17.02496 11.15053,-5.00414 27.36407,10.35737",
                 "m 128.76923,101.23077 13.53846,13.23077 -3.23077,16.92308 2.76923,114.46153 -6.92307,-15.6923 -20,-24.3077",
                 "m 140.69231,152.30769 c 0,0 -16.34202,32.62793 -26.3503,44.37678 -10.00828,11.74885 -33.179628,28.8282 -33.179628,28.8282",
                 "m 135.23077,148 c 0,0 41.53846,61.69231 51.84615,67.07692 10.3077,5.38462 54.61539,6.92308 54.61539,6.92308"
                ]

    var middle = ["",
                  "m 61.993784,42.290055 5.118439,11.523481 -3.048687,47.995854 -2.573205,32.221 -1.566298,14.43232 -1.118785,26.62707 L 65,202",
                  "m 85.426453,25.967862 2.383284,0.155757 5.389273,-0.650195 13.56737,-4.509271 22.70457,-5.537701 19.85662,-2.45241 14.2398,-0.39555 10.20519,1.10754 8.54388,2.847961 7.83189,5.14215 9.65142,17.008653 3.71817,7.673671 -6.48702,5.379481 -1.81953,18.986403 -0.94932,20.173053 0.7911,29.428926 1.02843,23.10012 1.18665,20.96416 1.26576,19.14462 1.66131,15.74289 0.23733,5.37948 2.92707,11.62917 -18.82818,-15.18912 -19.27761,-16.03124",
                  "m 89.569473,69.097591 50.690717,-12.352272 9.8995,-2.563262 0.7071,-3.712311 14.93763,3.800699",
                  "m 129.57812,23.5625 8.17188,7.25 2.25,23.9375 5.56349,25.683396 8.83884,34.294674 6.91017,16.83443 7.5,15.625 5.75,8.9375 L 182,166 l 11.25,9.5 -7.0625,-13.625 -0.625,-4.875 -0.3125,-9.125 0.15625,-5.71875",
                  "m 150.46904,30.980116 14.58408,5.833631 8.08754,4.728776",
                  "m 167.125,97.3125 1.9375,4.625 c 0,0 -3.625,12.625 -3.75,12.875 -0.125,0.25 -4.8125,10.6875 -4.8125,10.6875 l -7.4375,13.625 -11.1875,11.25 -9.875,5.75 c 0,0 -9.20313,2.5625 -9.26563,2.57812",
                  "m 81.879687,95.415221 -0.132582,5.966209 1.723572,5.21492 8.396893,10.47402 3.8007,3.88908 0.66291,0.66292",
                  "m 84.266173,106.11021 5.347495,-4.72878 11.976622,-5.480073 13.30244,-3.447146 5.21492,-0.883883 -7.07107,11.667262 -1.19324,4.28683 -0.30936,2.69585",
                  "m 93.54695,126.52792 2.78423,-4.90555 12.37437,-9.67853 2.82843,-1.72357 8.48528,-2.16552 8.17592,-2.07712",
                  "m 70.875,139.5625 -3.4375,8.75 13.4375,-6.375 14.75,-4.75 16.5625,-4.9375 16.875,-4.375 2.875,-0.6875 1.5625,-2.25 18.59375,2.3125",
                  "m 67,184 14.0625,-0.875 1.8125,-1.25 28.75,-5.9375 12.4375,-1.75 13.3125,-2.4375 14.375,-1.8125 10.3125,1.9375 10.3125,2.6875"
                ]

    var last = ["",
                "m 70.615385,35.230769 7.461538,5.923077 11.076923,6.692308 L 79,42.769231 75.769231,42.076923 H 74.615385 L 73.538462,42.615385 73,43.923077",
                "m 30.65864,103.93854 2.665249,0.43515 6.989478,1.35982 7.152657,-1.44141 4.649361,-1.15748 29.423077,-16.365389 11.769228,-7.615385 1.46154,-3.923077 19.30769,3.538462",
                "m 51.923077,130.69231 13.538462,16.73077 -2.076923,-4.57693 9.461538,-21.38461",
                "m 94.16227,97.4386 2.88282,1.958142 4.46021,3.861888 -7.615,16.37224 -5.928814,13.27186 -7.125461,14.14213 -3.916284,6.20078 -3.589926,4.78657",
                "m 22.200555,196.75991 2.719641,1.35982 6.418354,-1.90375 18.547955,-10.17146 28.556236,-20.72367 37.857409,-36.82394",
                "m 126.03647,39.94538 6.30956,1.087856 17.5145,-0.870285 20.4517,-5.439283 13.16306,-5.167319 4.78657,-3.589927 14.74046,2.828428",
                "m 136.28951,69.358302 8.81164,-1.468606 16.10028,-5.697649 9.92669,-4.378623 9.49155,-4.242641",
                "m 100.23077,97.346154 1.53846,-0.5 3.73077,0.730769 6.34615,-0.346154 5.5,-0.730769 8.26923,-1.5 13.88462,-3.423077 12.38462,-3.692307 3.57692,-0.615385 8.88461,-2.423077 19.42308,-3.653846 34.07692,-5.038462 4,-2.923077 18.46154,5.307693",
                "m 148.77453,10.317544 5.15048,2.62556 5.30422,4.773746 4.84298,4.296371 0.61498,11.138739 v 7.399307 l -0.53811,17.981108 -1.92182,12.650426 -3.45927,17.742421",
                "m 136.5,99.192308 -1.76923,3.923082 0.23077,1.73076 c 0,0 1.57692,1.3077 2,1.46154 0.42308,0.15385 4.38461,2.15385 4.57692,2.23077 0.19231,0.0769 4.76923,1.69231 4.76923,1.69231 l 4.03846,1.26923 c 0,0 1.57693,0.26923 1.11539,0.80769 -0.46154,0.53846 -1.23077,9.73077 -1.23077,9.73077 l -0.34615,19.03846 0.15384,9.07693 -0.30769,9.6923 -0.57692,8.3077 -0.73077,10.76923 -1.07693,9.15384 -1.34615,9.5 -3.42308,15.46154 -3.92307,11.30769 -3.76923,7.46154 -4.11539,6.07693 -3.69231,3.65384 -4.73077,4.07692",
                "m 156.61538,103.23077 1.41347,-1.02885 c 0,0 1.5673,0.0481 1.61538,0.0577 0.0481,0.01 4.375,-1.25961 4.375,-1.25961 L 170.75,98.115385 c 0,0 2.48077,-1.961539 4.88462,0.326923 2.40384,2.288462 7.23077,6.961542 7.23077,6.961542 l 4.25,2.6923 c 0,0 0.53846,0.32693 0.32692,0.53847 -0.21154,0.21153 -2,1.88461 -2,1.88461 l -4.96154,4.46154 -0.75858,6.71703 -0.19038,6.60873 -0.40794,7.34303 -0.27197,7.91416 -0.32635,8.73005 0.16318,8.51248 0.40794,8.56687 0.40795,8.26771 0.27196,6.60873 0.87029,10.52501 0.89748,7.99574 0.92468,6.25518 1.44141,7.01667 1.06066,4.18825 1.74057,6.8535 1.95814,8.24051 2.06693,6.74471 0.32635,1.71338 -9.87229,-14.90364 -5.84723,-8.45808 -6.03761,-9.70912 -0.92468,-1.32583 -3.34282,-6.77045 -1.53846,-3.38462",
                "M 150.38462,143.80769 155,142.11538 l 8.92308,-2.57692 11,-2.96154 3.88461,-0.84615",
                "m 149.80613,165.53842 2.33889,1.08786 6.03761,1.03346 9.24678,-1.74057 8.15892,-2.88282 3.046,-1.19664"
              ]


const sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))
async function first_N(){
    for (var i = 0; i < first.length; i++) {
      d3.select("#svg1")
      .append('path')
      .attr('class', 'path')
      .attr('fill', "none")
      .attr('stroke', "black")
      .attr('stroke-width', "6.103")
      .attr('d', first[i]);
      console.log(i);
      await sleep(500);
    }
}
first_N()

async function middle_N(){
    for (var j = 0; j < middle.length; j++) {
        d3.select("#svg2")
        .append('path')
        .attr('class', 'path')
        .attr('fill', "none")
        .attr('stroke', "black")
        .attr('stroke-width', "6.103")
        .attr('d', middle[j]);
        console.log(j);
        await sleep(500);
    }
}
middle_N()

async function last_N(){
    for (var k = 0; k < last.length; k++) {
      d3.select("#svg3")
      .append('path')
      .attr('class', 'path')
      .attr('fill', "none")
      .attr('stroke', "black")
      .attr('stroke-width', "6.103")
      .attr('d', last[k]);
      console.log(k);
      await sleep(500);
    }
}
last_N()
    </script>
</html>
