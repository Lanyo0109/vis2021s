<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="utf-8">
    <title>Lab 8</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@900&display=swap');

        h1, div {
          background-color: rgba(255, 255, 0, 0.1);
          font-family: 'Noto Serif JP', serif;
          font-size: 24pt;
          border: solid 1px black;
          width: 90%;
          margin: 5px auto;
          padding: 10px;
        }

        div {
          font-size: 12pt;
        }

        body {
            background-color: rgba(255, 128, 255, 0.1);
        }

        video:hover {
            box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);
        }

        .path {
          stroke-dasharray: 1000;
          stroke-dashoffset: 1000;
          animation: dash 5s linear forwards;
        }
        @keyframes dash {
          to {
            stroke-dashoffset: 0;
          }
        }
    </style>
    <script src="https://d3js.org/d3.v6.min.js" charset="utf-8"></script> <!-- v6.5.0 -->
</head>
<body>
    <h1>
        lab08 漢字書寫 (鉛筆字) (毛筆字也OK!) Path Animation
    </h1>
    <div>
      限定使用 D3.js，參考以下影片。
    	<ul>
    		<li><a href="https://bl.ocks.org/basilesimon/f164aec5758d16d51d248e41af5428e4">Animate path in D3</a></li>
    		<li><a href="https://codepen.io/MyXoToD/post/howto-self-drawing-svg-animation">"Self-Drawing" SVG</a></li>
    		<li><a href="https://stackoverflow.com/questions/15275362/how-to-transition-a-path-in-d3-js">How to transition a path in d3.js</a></li>
        <li><a href="https://css-tricks.com/svg-line-animation-works/">How SVG Line Animation Works</a></li>
        <li><a href="http://blog.roachking.net/blog/2014/10/31/osolve-team-drawing-animation/">使用 SVG 將圖片做成動畫</a></li>
        <li><a href="https://www.hesyifei.com/">何一非</a></li>
    	</ul>
    </div>

    <div>
  		<video width="400" controls loop autoplay>
  		  <source src="3.mp4" type="video/mp4">
  		</video>
    </div>

    <div>
      展示區 (姓名)
      <hr>
      <img width="256" src="./SU.svg">
      <img width="256" src="./LAIN.svg">
      <img width="256" src="./YU.svg">
    </div>

    <div>
      Drag and Drop 展示區 (接收任何SVG)<hr>
      <svg id="svg1" height="450" width="350">
      </svg>
      <svg id="svg2" height="450" width="350">
      </svg>
      <svg id="svg3" height="450" width="350">
      </svg>
    </div>

    <script type="text/javascript">
    var line = d3.line();
    var first = ["m 10.615385,57.846154 c 36.307692,7.384615 36.615384,7.076923 36.615384,7.076923 l 127.692311,-18.769231 4.61538,-2.769231 30.15385,5.23077",
                 "M 53.692308,24.307692 C 83.538462,82.153846 83.538462,82.153846 83.538462,82.153846",
                 "M 123.84615,7.6923077 C 142,22.769231 142.61538,23.692308 142.61538,23.692308 L 120.46154,67.384615 97.07692,84.923077",
                 "M 67.230769,80.615385 C 44.153846,111.07692 44.153846,111.07692 44.153846,111.07692 l -27.076923,21.53846",
                 "m 55.846154,106.15385 23.538461,-5.84616 5.846154,-4.615382 9.692311,3.846154 -21.538465,8.769228 -30.461538,19.38462 -9.076923,7.38461 -1.692308,3.69231 2.461539,20.30769 4.990875,11.82535 -2.393284,8.15892 6.962282,0.97908 5.548069,5.22171 0.652714,-2.77404 31.330269,-11.85763",
                 "m 37.648118,141.42136 44.819692,-13.81578 4.242641,-2.06693 13.489419,12.72792 -6.96228,8.92043 -6.962282,28.28427 -6.418354,9.68192 -17.188134,-4.13385",
                 "m 40.36776,162.74335 32.091769,-9.8995 h 10.225852",
                 "m 57.338323,133.91515 5.656854,9.57313 -0.652714,35.13777",
                 "m 19.372128,206.47518 5.548068,17.18813 12.836708,11.85764",
                 "M 42.108331,197.33718 56.90318,222.46667",
                 "m 59.731607,188.30798 17.623277,26.43491",
                 "m 80.836025,187.76405 9.790705,7.50621 8.15893,16.10027",
                 "m 98.78566,109.00323 45.90755,-17.405705 9.57313,-9.573138 28.71942,7.832567",
                 "m 87.254379,150.55935 27.413981,-5.65685 53.74012,-17.02496 11.15053,-5.00414 27.36407,10.35737",
                 "m 128.76923,101.23077 13.53846,13.23077 -3.23077,16.92308 2.76923,114.46153 -6.92307,-15.6923 -20,-24.3077",
                 "m 140.69231,152.30769 c 0,0 -16.34202,32.62793 -26.3503,44.37678 -10.00828,11.74885 -33.179628,28.8282 -33.179628,28.8282",
                 "m 135.23077,148 c 0,0 41.53846,61.69231 51.84615,67.07692 10.3077,5.38462 54.61539,6.92308 54.61539,6.92308"
                ]

    var middle = ["",
                  "m 35.409147,52.370828 c 0,0 20.014833,2.689741 24.919654,1.18665 4.904821,-1.50309 101.498149,-22.546353 101.498149,-22.546353 l 8.06922,-6.012361 21.99258,10.284302",
                  "m 117.98895,41.17127 -41.284376,31.768161 9.967861,7.278122 -6.274645,5.481342 c 0,0 -24.165746,133.582875 -51.464089,145.441985",
                  "m 109.59807,56.610497 3.58011,18.124309 5.59392,-6.377072 38.43025,-16.669889 12.92196,-2.964779 5.53798,3.524171 c 0,0 -59.4634,29.479973 -55.77141,34.570442",
                  "M 90.24309,98.005524 180.41713,77.643646",
                  "m 82.411602,119.03867 19.914368,-0.22375 c 0,0 66.56768,-22.040059 73.39226,-19.578733 6.82459,2.461323 7.94337,11.523483 7.94337,11.523483 l -35.91298,28.86464",
                  "m 73.461326,142.53315 c 0,0 117.248614,-34.23481 128.324584,-29.87155 4.47514,-4.1395 4.36326,-4.36326 4.36326,-4.36326 l 26.62707,8.95028",
                  "m 82.859116,157.63674 c 0,0 91.404694,-25.84392 106.172654,-23.60635",
                  "m 101.20718,89.502762 c 0,0 11.86188,8.59116 15.32735,14.544198 0.55939,6.82459 3.24447,112.54972 3.24447,112.54972",
                  "m 130.51934,73.392265 10.51657,22.599447 4.02763,126.870168 -12.97791,-25.9558",
                  "m 118.66022,154.39226 c 0,0 -26.40331,48.10774 -42.513812,49.22652",
                  "m 143.04972,149.91713 c 0,0 24.61326,36.24861 38.03868,40.05248 7.16022,5.37017 10.51657,6.93647 10.51657,6.93647 l 55.0442,4.47513",
                  "m 94.10878,6.170581 34.8084,18.037083 -14.39802,-2.689741 -16.6131,10.600742"
                ]

    var last = ["",
                "m 79.077874,16.454883 c 0,0 23.471846,20.465006 19.667986,25.387658 C 98.5221,41.17127 44.149171,133.13536 11.256906,152.60221",
                "m 83.530386,67.574585 -2.349447,128.604285 -7.719613,4.1395 c 0,0 42.513814,20.86533 38.318374,24.72514",
                "m 92.03315,92.187845 118.81492,-22.375691 3.46823,-3.468232 26.85083,8.390884",
                "m 156.92265,12.754144 11.85912,14.544198 c 0,0 -18.03022,89.468038 -29.42207,102.758518 -50.946845,66.45241 -50.946845,66.45241 -50.946845,66.45241",
                "m 138.09394,156.95426 8.06922,27.68851 -1.89864,2.3733 24.04945,17.79975",
                "m 147.19159,163.44129 44.69716,-11.39185 4.90482,-1.81953 16.05934,7.67367 -9.80965,3.63907 c 0,0 -5.37948,26.34363 -36.3906,30.14091 61.23115,-2.53152 61.23115,-2.53152 61.23115,-2.53152"
              ]


const sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))
async function first_N(){
    for (var i = 0; i < first.length; i++) {
      d3.select("#svg1")
      .append('path')
      .attr('class', 'path')
      .attr('fill', "none")
      .attr('stroke', "black")
      .attr('stroke-width', "6.103")
      .attr('d', first[i]);
      console.log(i);
      await sleep(500);
    }
}
first_N()

async function middle_N(){
    for (var j = 0; j < middle.length; j++) {
        d3.select("#svg2")
        .append('path')
        .attr('class', 'path')
        .attr('fill', "none")
        .attr('stroke', "black")
        .attr('stroke-width', "6.103")
        .attr('d', middle[j]);
        console.log(j);
        await sleep(500);
    }
}
middle_N()

async function last_N(){
    for (var k = 0; k < last.length; k++) {
      d3.select("#svg3")
      .append('path')
      .attr('class', 'path')
      .attr('fill', "none")
      .attr('stroke', "black")
      .attr('stroke-width', "6.103")
      .attr('d', last[k]);
      console.log(k);
      await sleep(500);
    }
}
last_N()
    </script>
</html>
